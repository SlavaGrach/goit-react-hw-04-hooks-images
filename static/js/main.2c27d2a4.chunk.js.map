{"version":3,"sources":["components/Searchbar/SearchBar.styled.js","components/Searchbar/SearchBar.jsx","services/api.js","components/ImageGalleryItem/ImageGalleryItem.styled.js","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.styled.js","components/ImageGallery/ImageGallery.jsx","components/Button/Button.styled.js","components/Button/Button.jsx","components/Loader/Container.styled.js","components/Loader/Spinner.jsx","components/Modal/Modal.styled.js","components/Modal/Modal.jsx","App.jsx","index.js"],"names":["HeaderBar","SearchForm","SearchBar","onSubmit","e","preventDefault","value","target","elements","imageName","trim","type","name","autoComplete","autoFocus","placeholder","axios","defaults","baseURL","Api","query","page","params","get","data","hits","Item","ImageGalleryItem","src","alt","largeImageURL","onSelect","onClick","List","ImageGallery","images","map","img","id","webformatURL","tags","Btn","Button","Container","Spinner","color","height","width","timeout","Overlay","Contaier","Modal","closeModal","App","useState","setImageName","setImages","setPage","reqStatus","setReqStatus","selectedImage","setSelectedImage","useEffect","a","getImages","response","length","Error","prevImages","window","scrollTo","top","document","documentElement","scrollHeight","behavior","toast","warning","fetchImages","addEventListener","handlerPressKey","key","className","imageURL","nodeName","prevState","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2c27d2a4.chunk.js","sourcesContent":["import styled from \"@emotion/styled/macro\";\n\nexport const HeaderBar = styled.header`\n  top: 0;\n  left: 0;\n  position: sticky;\n  z-index: 1100;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 64px;\n  padding-right: 24px;\n  padding-left: 24px;\n  padding-top: 12px;\n  padding-bottom: 12px;\n  color: #fff;\n  background-color: #3f51b5;\n  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2),\n    0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);\n`;\n\nexport const SearchForm = styled.form`\n  display: flex;\n  align-items: center;\n  width: 100%;\n  max-width: 600px;\n  background-color: #fff;\n  border-radius: 3px;\n  overflow: hidden;\n\n  & button {\n    display: inline-block;\n    width: 48px;\n    height: 48px;\n    border: 0;\n    background-image: url(\"https://image.flaticon.com/icons/svg/149/149852.svg\");\n    background-size: 40%;\n    background-repeat: no-repeat;\n    background-position: center;\n    opacity: 0.6;\n    transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\n    cursor: pointer;\n    outline: none;\n  }\n\n  & button:hover {\n    opacity: 1;\n  }\n  & span {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    clip-path: inset(50%);\n    border: 0;\n  }\n\n  & input {\n    display: inline-block;\n    width: 100%;\n    font: inherit;\n    font-size: 20px;\n    border: none;\n    outline: none;\n    padding-left: 4px;\n    padding-right: 4px;\n  }\n  &input::placeholder {\n    font: inherit;\n    font-size: 18px;\n  }\n`;\n","import React from \"react\";\n\nimport PropTypes from \"prop-types\";\nimport { HeaderBar, SearchForm } from \"./SearchBar.styled\";\n\nconst SearchBar = ({ onSubmit }) => {\n  return (\n    <>\n      <HeaderBar>\n        <SearchForm\n          // не используем контролируемый компонент чтобы небыло лишних рендеров\n          onSubmit={(e) => {\n            e.preventDefault();\n            const value = e.target.elements.imageName.value.trim();\n            if (!value) {\n              return;\n            }\n            onSubmit(value);\n            // console.log(e.target.elements.imageName.value);\n          }}\n        >\n          <button type=\"submit\">\n            <span>Search</span>\n          </button>\n\n          <input\n            type=\"text\"\n            name=\"imageName\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </SearchForm>\n      </HeaderBar>\n    </>\n  );\n};\n\nSearchBar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n\nexport default SearchBar;\n","import axios from \"axios\";\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\nexport class Api {\n  static async getImages(query, page) {\n    const API_KEY = \"6482848-443bdcc87ab7c743d3374b0c5\";\n    const params = `?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n    const { data } = await axios.get(params);\n    return data.hits;\n  }\n}\n\nexport const getImages = async (query, page) => {\n  const API_KEY = \"6482848-443bdcc87ab7c743d3374b0c5\";\n\n  const params = `?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n  const { data } = await axios.get(params);\n  console.log(data.hits);\n  return data.hits;\n};\n","import styled from \"@emotion/styled/macro\";\n\nexport const Item = styled.li`\n  border-radius: 2px;\n  box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2),\n    0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 2px 1px -1px rgba(0, 0, 0, 0.12);\n\n  & img {\n    width: 100%;\n    height: 260px;\n    object-fit: cover;\n    transition: transform 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  & img:hover {\n    transform: scale(1.03);\n    cursor: zoom-in;\n  }\n`;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Item } from \"./ImageGalleryItem.styled\";\n\nconst ImageGalleryItem = ({ src, alt, largeImageURL, onSelect }) => {\n  return (\n    <Item\n      onClick={() => {\n        onSelect(largeImageURL);\n      }}\n    >\n      <img src={src} alt={alt} />\n    </Item>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  id: PropTypes.number,\n  src: PropTypes.string,\n  alt: PropTypes.string,\n};\n\nexport default ImageGalleryItem;\n\n/*\nid - уникальный идентификатор\nwebformatURL - ссылка на маленькое изображение для списка карточек\nlargeImageURL - ссылка на большое изображение для модального окна\n*/\n","import styled from \"@emotion/styled/macro\";\n\nexport const List = styled.ul`\n  display: grid;\n  max-width: calc(100vw - 48px);\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  grid-gap: 16px;\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 0;\n  list-style: none;\n  margin-left: auto;\n  margin-right: auto;\n`;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\nimport { List } from \"./ImageGallery.styled\";\n\nconst ImageGallery = ({ images, onSelect }) => {\n  return (\n    <div>\n      <List>\n        {images.map((img) => {\n          const { id, webformatURL, tags, largeImageURL } = img;\n\n          return (\n            <ImageGalleryItem\n              onSelect={onSelect}\n              key={id}\n              src={webformatURL}\n              alt={tags}\n              largeImageURL={largeImageURL}\n            />\n          );\n        })}\n      </List>\n    </div>\n  );\n};\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      largeImageURL: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n  onSelect: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import styled from \"@emotion/styled/macro\";\n\nexport const Btn = styled.button`\n  padding: 8px 16px;\n  border-radius: 2px;\n  background-color: #3f51b5;\n  transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  text-align: center;\n  display: inline-block;\n  color: #fff;\n  border: 0;\n  text-decoration: none;\n  cursor: pointer;\n  font-family: inherit;\n  font-size: 18px;\n  line-height: 24px;\n  font-style: normal;\n  font-weight: 500;\n  min-width: 180px;\n  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2),\n    0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n  &:hover,\n  &:focus {\n    background-color: #303f9f;\n  }\n`;\n","import React from \"react\";\nimport { Btn } from \"./Button.styled\";\n\nexport const Button = ({ onClick }) => {\n  return (\n    <>\n      <Btn onClick={onClick}>Load more</Btn>\n    </>\n  );\n};\n","import styled from \"@emotion/styled/macro\";\n\nexport const Container = styled.div`\n  display: block;\n  margin: 0 auto;\n  align-items: center;\n  padding-top: 150px;\n`;\n","import Loader from \"react-loader-spinner\";\n// import \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nimport React from \"react\";\nimport { Container } from \"./Container.styled\";\n\nexport const Spinner = () => {\n  return (\n    <>\n      <Container>\n        <Loader\n          type=\"Oval\"\n          color=\"#3f51b5\"\n          height={100}\n          width={100}\n          timeout={2000}\n        />\n      </Container>\n    </>\n  );\n};\n","import styled from \"@emotion/styled/macro\";\r\n\r\nexport const Overlay = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: rgba(0, 0, 0, 0.8);\r\n  z-index: 1200;\r\n`;\r\nexport const Contaier = styled.div`\r\n  //Modal\r\n  max-width: calc(100vw - 48px);\r\n  max-height: calc(100vh - 24px);\r\n`;\r\n","import React from \"react\";\nimport { Contaier, Overlay } from \"./Modal.styled\";\n\nconst Modal = ({ src, closeModal }) => {\n  return (\n    <Overlay onClick={closeModal}>\n      <Contaier>\n        <img src={src} alt=\"\" />\n      </Contaier>\n    </Overlay>\n  );\n};\n\nexport default Modal;\n","import \"./App.css\";\nimport { useState, useEffect } from \"react\";\n\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport SearchBar from \"./components/Searchbar/SearchBar\";\nimport { Api } from \"./services/api\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\nimport { Button } from \"./components/Button/Button\";\nimport { Spinner } from \"./components/Loader/Spinner\";\nimport Modal from \"./components/Modal/Modal\";\n\nexport default function App() {\n  const [imageName, setImageName] = useState(null); //имя изображения для поиска\n  const [images, setImages] = useState([]); //массив найденных изображений\n  const [page, setPage] = useState(1); //номер страницы из 12 изображений\n  const [reqStatus, setReqStatus] = useState(\"idle\"); // idle, pending, resolved, rejected - состояния запроса\n  const [selectedImage, setSelectedImage] = useState(null); //имя выбраного изображения для модального окна\n\n  useEffect(() => {\n    if (!imageName) return; //если запрос пустой то и запращивать ничего не надо\n\n    setReqStatus(\"pending\");\n    //магия асинхронных запросов в useEffect от Dan Abramov\n    const fetchImages = async () => {\n      try {\n        const response = await Api.getImages(imageName, page);\n        if (!response.length) {\n          throw new Error();\n        }\n        setReqStatus(\"resolved\");\n        setImages((prevImages) => {\n          return [...prevImages, ...response];\n        });\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: \"smooth\",\n        });\n      } catch (error) {\n        setReqStatus(\"rejected\");\n        toast.warning(`Not Found any images by query: ${imageName}`);\n      }\n    };\n\n    fetchImages();\n  }, [imageName, page]);\n\n  //отдельный хук на событие\n  useEffect(() => {\n    selectedImage && window.addEventListener(\"keydown\", handlerPressKey);\n  }, [selectedImage]);\n\n  // сброс state перед новым запросом\n  const resetState = () => {\n    setImageName(null);\n    setImages([]);\n    setPage(1);\n    setReqStatus(\"idle\");\n  };\n\n  // получаем имя изображения из формы и записываем в state\n  const hendleFormSubmit = (imageName) => {\n    resetState(); //очистка состояния перед запросом\n    setImageName(imageName);\n  };\n\n  // действие при выборе изображения в галерее, в стате передаем ссылку на большое изображение\n  const handleSelectImage = (imageURL) => {\n    setSelectedImage(imageURL);\n  };\n\n  const handleCloseModal = (e) => {\n    if (e.target.nodeName === \"IMG\") {\n      return;\n    }\n    setSelectedImage(null);\n  };\n\n  const handlerPressKey = (e) => {\n    if (e.key === \"Escape\") {\n      setSelectedImage(null);\n    }\n  };\n\n  // действие по нажалию кнопки \"LOAD MORE\" с стайте увеличиваем значение page на 1\n  const handleLoadMoreClick = () => {\n    setPage((prevState) => {\n      return prevState + 1;\n    });\n  };\n\n  return (\n    <div className=\"App\">\n      <SearchBar onSubmit={hendleFormSubmit} />\n      {reqStatus === \"pending\" && <Spinner />}\n      <ImageGallery images={images} onSelect={handleSelectImage} />\n      {selectedImage && (\n        <Modal closeModal={handleCloseModal} src={selectedImage} />\n      )}\n      {images.length > 0 && <Button onClick={handleLoadMoreClick} />}\n      <ToastContainer />\n    </div>\n  );\n}\n\n// class oldApp {\n//   state = {\n//     imageName: null,\n//     images: [],\n//     page: 1,\n//     reqStatus: \"idle\", // idle, pending, resolved, rejected\n//     selectedImage: null,\n//   };\n\n//   async componentDidUpdate(_, prevState) {\n//     //асиннхронный вызов\n//     const { imageName, page, selectedImage } = this.state;\n//     if (prevState.imageName !== imageName || prevState.page !== page) {\n//       try {\n//         this.setState({ reqStatus: \"pending\" });\n//         const images = await Api.getImages(imageName, page);\n//         if (!images.length) {\n//           throw new Error();\n//         }\n//         const reqStatus = \"resolved\";\n//         this.setState((prevState) => ({\n//           images: [...prevState.images, ...images],\n//           reqStatus: reqStatus,\n//         }));\n//       } catch (error) {\n//         this.setState({\n//           status: \"rejected\",\n//         });\n//         toast.warning(`Not Found any images by query: ${imageName}`);\n//       }\n//       page > 1 && // если больше одной страницы, то скролим\n//         window.scrollTo({\n//           top: document.documentElement.scrollHeight,\n//           behavior: \"smooth\",\n//         });\n//     }\n//     selectedImage && window.addEventListener(\"keydown\", this.handlerPressKey);\n//   }\n\n//   // получаем имя изображения из формы и записываем в state\n//   hendleFormSubmit = (imageName) => {\n//     this.resetState(); //очистка состояния перед запросом\n//     this.setState({ imageName });\n//   };\n\n//   // действие при выборе изображения в галерее, в стате передаем ссылку на большое изображение\n//   handleSelectImage = (imageURL) => {\n//     this.setState({ selectedImage: imageURL });\n//   };\n\n//   handleCloseModal = (e) => {\n//     if (e.target.nodeName === \"IMG\") {\n//       return;\n//     }\n//     this.setState({ selectedImage: null });\n//   };\n\n//   handlerPressKey = (e) => {\n//     if (e.key === \"Escape\") {\n//       this.setState({ selectedImage: null });\n//     }\n//   };\n\n//   // действие по нажалию кнопки \"LOAD MORE\" с стайте увеличиваем значение page на 1\n//   handleLoadMoreClick = () => {\n//     this.setState({ page: this.state.page + 1 });\n//   };\n\n//   // сброс state перед новым запросом\n//   resetState = () => {\n//     this.setState({\n//       imageName: null,\n//       images: [],\n//       page: 1,\n//       reqStatus: \"idle\",\n//       modalIsOpen: false,\n//     });\n//   };\n\n//   render() {\n//     const { reqStatus, images, selectedImage } = this.state;\n\n//     return (\n//       <div className=\"App\">\n//         <SearchBar onSubmit={this.hendleFormSubmit} />\n//         {reqStatus === \"pending\" && <Spinner />}\n//         <ImageGallery\n//           images={images}\n//           // onClick={this.handleSelectImage}\n//           onSelect={this.handleSelectImage}\n//         />\n//         {selectedImage && (\n//           <Modal closeModal={this.handleCloseModal} src={selectedImage} />\n//         )}\n//         {images.length > 0 && <Button onClick={this.handleLoadMoreClick} />}\n//         <ToastContainer />\n//       </div>\n//     );\n//   }\n// }\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}